<html>
  <head>
    <title>Geoloqi Socket JS Test</title>

    <script type="text/javascript" src="https://maps.google.com/maps/api/js"></script>
    <script type="text/javascript" src="https://subscribe.geoloqi.com/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="../geoloqi-client.js"></script>
    <script type="text/javascript" src="../geoloqi-maps.js"></script>
    <script type="text/javascript" src="../geoloqi-sockets.js"></script>

    <script type="text/javascript">
      var map;

      window.onload = function () {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 14,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        geoloqi.init({'client_id': '665a737a5abe1fac5cced7149f03a62b'});

        var drunkenBicycle = null;

        var testSocket = new geoloqi.Socket('trip', 'TQ4ew3Z');

        testSocket.onLocation = function(location) {
          if(drunkenBicycle === null) {
            drunkenBicycle = geoloqi.maps.pins.Basic({'lat': location.latitude, 'lng': location.longitude});
          }
          drunkenBicycle.moveTo(new google.maps.LatLng(location.latitude, location.longitude), true);
        }

        testSocket.onDisconnect = function() {
          console.log('socket disconnected');
        }

        testSocket.start();
      });
    </script>
  </head>
  <body>
    <div id="geoloqi-root" style="display:none;"></div>
    <div id="map"></div>
  </body>
</html>