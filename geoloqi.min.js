var JSON;JSON||(JSON={}),function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();(function(a,b,c,d,e,f){function u(a,b){var c=typeof a[b];return c=="function"||c=="object"&&!!a[b]||c=="unknown"}function v(a,b){return typeof a[b]=="object"&&!!a[b]}function w(a){return Object.prototype.toString.call(a)==="[object Array]"}function x(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return s=Array.prototype.slice.call(a.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),t=parseInt(s[0],10)>9&&parseInt(s[1],10)>0,a=null,!0}catch(b){return!1}}function D(){if(A)return;A=!0;for(var a=0;a<B.length;a++)B[a]();B.length=0}function F(a,b){if(A){a.call(b);return}B.push(function(){a.call(b)})}function G(){var a=parent;if(m!=="")for(var b=0,c=m.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function H(b){return a.easyXDM=o,m=b,m&&(p="easyXDM_"+m.replace(".","_")+"_"),n}function I(a){return a.match(j)[3]}function J(a){return a.match(j)[4]||""}function K(a){var b=a.toLowerCase().match(j),c=b[2],d=b[3],e=b[4]||"";if(c=="http:"&&e==":80"||c=="https:"&&e==":443")e="";return c+"//"+d+e}function L(a){a=a.replace(l,"$1/");if(!a.match(/^(http||https):\/\//)){var b=a.substring(0,1)==="/"?"":c.pathname;b.substring(b.length-1)!=="/"&&(b=b.substring(0,b.lastIndexOf("/")+1)),a=c.protocol+"//"+c.host+b+a}while(k.test(a))a=a.replace(k,"");return a}function M(a,b){var c="",d=a.indexOf("#");d!==-1&&(c=a.substring(d),a=a.substring(0,d));var e=[];for(var g in b)b.hasOwnProperty(g)&&e.push(g+"="+f(b[g]));return a+(r?"#":a.indexOf("?")==-1?"?":"&")+e.join("&")+c}function O(a){return typeof a=="undefined"}function Q(a,b,c){var d;for(var e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],typeof d=="object"?Q(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function R(){var a=b.body.appendChild(b.createElement("form")),c=a.appendChild(b.createElement("input"));c.name=p+"TEST"+h,q=c!==a.elements[c.name],b.body.removeChild(a)}function S(a){O(q)&&R();var c;q?c=b.createElement('<iframe name="'+a.props.name+'"/>'):(c=b.createElement("IFRAME"),c.name=a.props.name),c.id=c.name=a.props.name,delete a.props.name,a.onLoad&&y(c,"load",a.onLoad),typeof a.container=="string"&&(a.container=b.getElementById(a.container)),a.container||(Q(c.style,{position:"absolute",top:"-2000px"}),a.container=b.body);var d=a.props.src;return delete a.props.src,Q(c,a.props),c.border=c.frameBorder=0,c.allowTransparency=!0,a.container.appendChild(c),c.src=d,a.props.src=d,c}function T(a,b){typeof a=="string"&&(a=[a]);var c,d=a.length;while(d--){c=a[d],c=new RegExp(c.substr(0,1)=="^"?c:"^"+c.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$");if(c.test(b))return!0}return!1}function U(d){var e=d.protocol,f;d.isHost=d.isHost||O(N.xdm_p),r=d.hash||!1,d.props||(d.props={});if(!d.isHost){d.channel=N.xdm_c,d.secret=N.xdm_s,d.remote=N.xdm_e,e=N.xdm_p;if(d.acl&&!T(d.acl,d.remote))throw new Error("Access denied for "+d.remote)}else d.remote=L(d.remote),d.channel=d.channel||"default"+h++,d.secret=Math.random().toString(16).substring(2),O(e)&&(K(c.href)==K(d.remote)?e="4":u(a,"postMessage")||u(b,"postMessage")?e="1":d.swf&&u(a,"ActiveXObject")&&x()?e="6":navigator.product==="Gecko"&&"frameElement"in a&&navigator.userAgent.indexOf("WebKit")==-1?e="5":d.remoteHelper?(d.remoteHelper=L(d.remoteHelper),e="2"):e="0");d.protocol=e;switch(e){case"0":Q(d,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0);if(d.isHost){if(!d.local){var g=c.protocol+"//"+c.host,i=b.body.getElementsByTagName("img"),j,k=i.length;while(k--){j=i[k];if(j.src.substring(0,g.length)===g){d.local=j.src;break}}d.local||(d.local=a)}var l={xdm_c:d.channel,xdm_p:0};d.local===a?(d.usePolling=!0,d.useParent=!0,d.local=c.protocol+"//"+c.host+c.pathname+c.search,l.xdm_e=d.local,l.xdm_pa=1):l.xdm_e=L(d.local),d.container&&(d.useResize=!1,l.xdm_po=1),d.remote=M(d.remote,l)}else Q(d,{channel:N.xdm_c,remote:N.xdm_e,useParent:!O(N.xdm_pa),usePolling:!O(N.xdm_po),useResize:d.useParent?!1:d.useResize});f=[new n.stack.HashTransport(d),new n.stack.ReliableBehavior({}),new n.stack.QueueBehavior({encode:!0,maxLength:4e3-d.remote.length}),new n.stack.VerifyBehavior({initiate:d.isHost})];break;case"1":f=[new n.stack.PostMessageTransport(d)];break;case"2":f=[new n.stack.NameTransport(d),new n.stack.QueueBehavior,new n.stack.VerifyBehavior({initiate:d.isHost})];break;case"3":f=[new n.stack.NixTransport(d)];break;case"4":f=[new n.stack.SameOriginTransport(d)];break;case"5":f=[new n.stack.FrameElementTransport(d)];break;case"6":s||x(),f=[new n.stack.FlashTransport(d)]}return f.push(new n.stack.QueueBehavior({lazy:d.lazy,remove:!0})),f}function V(a){var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var d=0,e=a.length;d<e;d++)b=a[d],Q(b,c,!0),d!==0&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function W(a){a.up.down=a.down,a.down.up=a.up,a.up=a.down=null}var g=this,h=Math.floor(Math.random()*1e4),i=Function.prototype,j=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,k=/[\-\w]+\/\.\.\//,l=/([^:])\/\//g,m="",n={},o=a.easyXDM,p="easyXDM_",q,r=!1,s,t,y,z;if(u(a,"addEventListener"))y=function(a,b,c){a.addEventListener(b,c,!1)},z=function(a,b,c){a.removeEventListener(b,c,!1)};else{if(!u(a,"attachEvent"))throw new Error("Browser not supported");y=function(a,b,c){a.attachEvent("on"+b,c)},z=function(a,b,c){a.detachEvent("on"+b,c)}}var A=!1,B=[],C;"readyState"in b?(C=b.readyState,A=C=="complete"||~navigator.userAgent.indexOf("AppleWebKit/")&&(C=="loaded"||C=="interactive")):A=!!b.body;if(!A){if(u(a,"addEventListener"))y(b,"DOMContentLoaded",D);else{y(b,"readystatechange",function(){b.readyState=="complete"&&D()});if(b.documentElement.doScroll&&a===top){var E=function(){if(A)return;try{b.documentElement.doScroll("left")}catch(a){d(E,1);return}D()};E()}}y(a,"load",D)}var N=function(a){a=a.substring(1).split("&");var b={},c,d=a.length;while(d--)c=a[d].split("="),b[c[0]]=e(c[1]);return b}(/xdm_e=/.test(c.search)?c.search:c.hash),P=function(){var a={},b={a:[1,2,3]},c='{"a":[1,2,3]}';return typeof JSON!="undefined"&&typeof JSON.stringify=="function"&&JSON.stringify(b).replace(/\s/g,"")===c?JSON:(Object.toJSON&&Object.toJSON(b).replace(/\s/g,"")===c&&(a.stringify=Object.toJSON),typeof String.prototype.evalJSON=="function"&&(b=c.evalJSON(),b.a&&b.a.length===3&&b.a[2]===3&&(a.parse=function(a){return a.evalJSON()})),a.stringify&&a.parse?(P=function(){return a},a):null)};Q(n,{version:"2.4.15.118",query:N,stack:{},apply:Q,getJSONObject:P,whenReady:F,noConflict:H}),n.DomHelper={on:y,un:z,requiresJSON:function(c){v(a,"JSON")||b.write('<script type="text/javascript" src="'+c+'"></script>')}},function(){var a={};n.Fn={set:function(b,c){a[b]=c},get:function(b,c){var d=a[b];return c&&delete a[b],d}}}(),n.Socket=function(a){var b=V(U(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){a.onReady&&a.onReady(b)}}])),c=K(a.remote);this.origin=K(a.remote),this.destroy=function(){b.destroy()},this.postMessage=function(a){b.outgoing(a,c)},b.init()},n.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];typeof d=="function"&&(b.local[c]={method:d})}var e=V(U(a).concat([new n.stack.RpcBehavior(this,b),{callback:function(b){a.onReady&&a.onReady(b)}}]));this.origin=K(a.remote),this.destroy=function(){e.destroy()},e.init()},n.stack.SameOriginTransport=function(a){var b,e,f,g;return b={outgoing:function(a,b,c){f(a),c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){g=K(a.remote),a.isHost?(Q(a.props,{src:M(a.remote,{xdm_e:c.protocol+"//"+c.host+c.pathname,xdm_c:a.channel,xdm_p:4}),name:p+a.channel+"_provider"}),e=S(a),n.Fn.set(a.channel,function(a){return f=a,d(function(){b.up.callback(!0)},0),function(a){b.up.incoming(a,g)}})):(f=G().Fn.get(a.channel,!0)(function(a){b.up.incoming(a,g)}),d(function(){b.up.callback(!0)},0))},init:function(){F(b.onDOMReady,b)}}},n.stack.FlashTransport=function(a){function l(a,b){d(function(){e.up.incoming(a,i)},0)}function o(c){var d=a.swf+"?host="+a.isHost,e="easyXDM_swf_"+Math.floor(Math.random()*1e4);n.Fn.set("flash_loaded"+c.replace(/[\-.]/g,"_"),function(){n.stack.FlashTransport[c].swf=j=k.firstChild;var a=n.stack.FlashTransport[c].queue;for(var b=0;b<a.length;b++)a[b]();a.length=0}),a.swfContainer?k=typeof a.swfContainer=="string"?b.getElementById(a.swfContainer):a.swfContainer:(k=b.createElement("div"),Q(k.style,t&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),b.body.appendChild(k));var f="callback=flash_loaded"+c.replace(/[\-.]/g,"_")+"&proto="+g.location.protocol+"&domain="+I(g.location.href)+"&port="+J(g.location.href)+"&ns="+m;k.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+e+"' data='"+d+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+d+"'></param><param name='flashvars' value='"+f+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+f+"' allowScriptAccess='always' wmode='transparent' src='"+d+"' height='1' width='1'></embed></object>"}var e,f,h,i,j,k;return e={outgoing:function(b,c,d){j.postMessage(a.channel,b.toString()),d&&d()},destroy:function(){try{j.destroyChannel(a.channel)}catch(b){}j=null,f&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){i=a.remote,n.Fn.set("flash_"+a.channel+"_init",function(){d(function(){e.up.callback(!0)})}),n.Fn.set("flash_"+a.channel+"_onMessage",l),a.swf=L(a.swf);var b=I(a.swf),g=function(){n.stack.FlashTransport[b].init=!0,j=n.stack.FlashTransport[b].swf,j.createChannel(a.channel,a.secret,K(a.remote),a.isHost),a.isHost&&(t&&a.swfNoThrottle&&Q(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),Q(a.props,{src:M(a.remote,{xdm_e:K(c.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:p+a.channel+"_provider"}),f=S(a))};n.stack.FlashTransport[b]&&n.stack.FlashTransport[b].init?g():n.stack.FlashTransport[b]?n.stack.FlashTransport[b].queue.push(g):(n.stack.FlashTransport[b]={queue:[g]},o(b))},init:function(){F(e.onDOMReady,e)}}},n.stack.PostMessageTransport=function(b){function i(a){if(a.origin)return K(a.origin);if(a.uri)return K(a.uri);if(a.domain)return c.protocol+"//"+a.domain;throw"Unable to retrieve the origin of the event"}function j(a){var c=i(a);c==h&&a.data.substring(0,b.channel.length+1)==b.channel+" "&&e.up.incoming(a.data.substring(b.channel.length+1),c)}var e,f,g,h;return e={outgoing:function(a,c,d){g.postMessage(b.channel+" "+a,c||h),d&&d()},destroy:function(){z(a,"message",j),f&&(g=null,f.parentNode.removeChild(f),f=null)},onDOMReady:function(){h=K(b.remote);if(b.isHost){var i=function(c){c.data==b.channel+"-ready"&&(g="postMessage"in f.contentWindow?f.contentWindow:f.contentWindow.document,z(a,"message",i),y(a,"message",j),d(function(){e.up.callback(!0)},0))};y(a,"message",i),Q(b.props,{src:M(b.remote,{xdm_e:K(c.href),xdm_c:b.channel,xdm_p:1}),name:p+b.channel+"_provider"}),f=S(b)}else y(a,"message",j),g="postMessage"in a.parent?a.parent:a.parent.document,g.postMessage(b.channel+"-ready",h),d(function(){e.up.callback(!0)},0)},init:function(){F(e.onDOMReady,e)}}},n.stack.FrameElementTransport=function(e){var f,g,h,i;return f={outgoing:function(a,b,c){h.call(this,a),c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){i=K(e.remote),e.isHost?(Q(e.props,{src:M(e.remote,{xdm_e:K(c.href),xdm_c:e.channel,xdm_p:5}),name:p+e.channel+"_provider"}),g=S(e),g.fn=function(a){return delete g.fn,h=a,d(function(){f.up.callback(!0)},0),function(a){f.up.incoming(a,i)}}):(b.referrer&&K(b.referrer)!=N.xdm_e&&(a.top.location=N.xdm_e),h=a.frameElement.fn(function(a){f.up.incoming(a,i)}),f.up.callback(!0))},init:function(){F(f.onDOMReady,f)}}},n.stack.NameTransport=function(a){function k(b){var d=a.remoteHelper+(c?"#_3":"#_2")+a.channel;e.contentWindow.sendMessage(b,d)}function l(){c?(++g===2||!c)&&b.up.callback(!0):(k("ready"),b.up.callback(!0))}function m(a){b.up.incoming(a,i)}function o(){h&&d(function(){h(!0)},0)}var b,c,e,f,g,h,i,j;return b={outgoing:function(a,b,c){h=c,k(a)},destroy:function(){e.parentNode.removeChild(e),e=null,c&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){c=a.isHost,g=0,i=K(a.remote),a.local=L(a.local),c?(n.Fn.set(a.channel,function(b){c&&b==="ready"&&(n.Fn.set(a.channel,m),l())}),j=M(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),Q(a.props,{src:j+"#"+a.channel,name:p+a.channel+"_provider"}),f=S(a)):(a.remoteHelper=a.remote,n.Fn.set(a.channel,m)),e=S({props:{src:a.local+"#_4"+a.channel},onLoad:function b(){var c=e||this;z(c,"load",b),n.Fn.set(a.channel+"_load",o),function f(){typeof c.contentWindow.sendMessage=="function"?l():d(f,50)}()}})},init:function(){F(b.onDOMReady,b)}}},n.stack.HashTransport=function(b){function o(a){if(!l)return;var c=b.remote+"#"+j++ +"_"+a;(f||!m?l.contentWindow:l).location=c}function q(a){i=a,c.up.incoming(i.substring(i.indexOf("_")+1),n)}function r(){if(!k)return;var a=k.location.href,b="",c=a.indexOf("#");c!=-1&&(b=a.substring(c)),b&&b!=i&&q(b)}function s(){g=setInterval(r,h)}var c,e=this,f,g,h,i,j,k,l,m,n;return c={outgoing:function(a,b){o(a)},destroy:function(){a.clearInterval(g),(f||!m)&&l.parentNode.removeChild(l),l=null},onDOMReady:function(){f=b.isHost,h=b.interval,i="#"+b.channel,j=0,m=b.useParent,n=K(b.remote);if(f){b.props={src:b.remote,name:p+b.channel+"_provider"};if(m)b.onLoad=function(){k=a,s(),c.up.callback(!0)};else{var e=0,g=b.delay/50;(function o(){if(++e>g)throw new Error("Unable to reference listenerwindow");try{k=l.contentWindow.frames[p+b.channel+"_consumer"]}catch(a){}k?(s(),c.up.callback(!0)):d(o,50)})()}l=S(b)}else k=a,s(),m?(l=parent,c.up.callback(!0)):(Q(b,{props:{src:b.remote+"#"+b.channel+new Date,name:p+b.channel+"_consumer"},onLoad:function(){c.up.callback(!0)}}),l=S(b))},init:function(){F(c.onDOMReady,c)}}},n.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var h=a.indexOf("_"),i=a.substring(0,h).split(",");a=a.substring(h+1),i[0]==d&&(f="",c&&c(!0)),a.length>0&&(b.down.outgoing(i[1]+","+d+"_"+f,g),e!=i[1]&&(e=i[1],b.up.incoming(a,g)))},outgoing:function(a,g,h){f=a,c=h,b.down.outgoing(e+","+ ++d+"_"+a,g)}}},n.stack.QueueBehavior=function(a){function m(){if(a.remove&&c.length===0){W(b);return}if(g||c.length===0||i)return;g=!0;var e=c.shift();b.down.outgoing(e.data,e.origin,function(a){g=!1,e.callback&&d(function(){e.callback(a)},0),m()})}var b,c=[],g=!0,h="",i,j=0,k=!1,l=!1;return b={init:function(){O(a)&&(a={}),a.maxLength&&(j=a.maxLength,l=!0),a.lazy?k=!0:b.down.init()},callback:function(a){g=!1;var c=b.up;m(),c.callback(a)},incoming:function(c,d){if(l){var f=c.indexOf("_"),g=parseInt(c.substring(0,f),10);h+=c.substring(f+1),g===0&&(a.encode&&(h=e(h)),b.up.incoming(h,d),h="")}else b.up.incoming(c,d)},outgoing:function(d,e,g){a.encode&&(d=f(d));var h=[],i;if(l){while(d.length!==0)i=d.substring(0,j),d=d.substring(i.length),h.push(i);while(i=h.shift())c.push({data:h.length+"_"+i,origin:e,callback:h.length===0?g:null})}else c.push({data:d,origin:e,callback:g});k?b.down.init():m()},destroy:function(){i=!0,b.down.destroy()}}},n.stack.VerifyBehavior=function(a){function f(){c=Math.random().toString(16).substring(2),b.down.outgoing(c)}var b,c,d,e=!1;return b={incoming:function(e,g){var h=e.indexOf("_");h===-1?e===c?b.up.callback(!0):d||(d=e,a.initiate||f(),b.down.outgoing(e)):e.substring(0,h)===d&&b.up.incoming(e.substring(h+1),g)},outgoing:function(a,d,e){b.down.outgoing(c+"_"+a,d,e)},callback:function(b){a.initiate&&f()}}},n.stack.RpcBehavior=function(a,b){function g(a){a.jsonrpc="2.0",c.down.outgoing(d.stringify(a))}function h(a,b){var c=Array.prototype.slice;return function(){var d=arguments.length,h,i={method:b};d>0&&typeof arguments[d-1]=="function"?(d>1&&typeof arguments[d-2]=="function"?(h={success:arguments[d-2],error:arguments[d-1]},i.params=c.call(arguments,0,d-2)):(h={success:arguments[d-1]},i.params=c.call(arguments,0,d-1)),f[""+ ++e]=h,i.id=e):i.params=c.call(arguments,0),a.namedParams&&i.params.length===1&&(i.params=i.params[0]),g(i)}}function j(a,b,c,d){if(!c){b&&g({id:b,error:{code:-32601,message:"Procedure not found."}});return}var e,f;b?(e=function(a){e=i,g({id:b,result:a})},f=function(a,c){f=i;var d={id:b,error:{code:-32099,message:a}};c&&(d.error.data=c),g(d)}):e=f=i,w(d)||(d=[d]);try{var h=c.method.apply(c.scope,d.concat([e,f]));O(h)||e(h)}catch(j){f(j.message)}}var c,d=b.serializer||P(),e=0,f={};return c={incoming:function(a,c){var e=d.parse(a);if(e.method)b.handle?b.handle(e,g):j(e.method,e.id,b.local[e.method],e.params);else{var h=f[e.id];e.error?h.error&&h.error(e.error):h.success&&h.success(e.result),delete f[e.id]}},init:function(){if(b.remote)for(var d in b.remote)b.remote.hasOwnProperty(d)&&(a[d]=h(b.remote[d],d));c.down.init()},destroy:function(){for(var d in b.remote)b.remote.hasOwnProperty(d)&&a.hasOwnProperty(d)&&delete a[d];c.down.destroy()}}},g.easyXDM=n})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);var geoloqi=function(){function w(a){var b=document.location.hash.substring(1),c={};e.auth=r.session.load(),o=r.merge(defaultConfig,a),b!==""&&x(b)}function x(a){var b;typeof a=="string"?b=r.objectify(a):b=a,b&&(e.auth=b,r.session.create(b),e.onAuthorize!==null&&e.onAuthorize(b))}function y(a){x(a)}function z(){C(!0)}function A(){C(!1)}function B(){C(!0)}function C(a){var b={},c="";if(p===null){b={response_type:"token",client_id:d.config.client_id},d.config.redirect_uri&&(b.redirect_uri=d.config.redirect_uri),a===!0&&(b.mode="popup"),c=i+j+"?"+r.serialize(b);if(a===!0){var e=window.open(c,"_geoloqi_auth_popup","height=500,width=700");window.focus&&e.focus()}else window.location=c}}function D(){return e.auth&&e.auth.access_token?!0:!1}function E(){e.auth=null,r.session.destroy()}function F(a,b,c,d){arguments.length==4?J("GET",a,b,c,d):arguments.length==3?typeof arguments[1]=="function"&&typeof arguments[2]=="object"?(alias_callback=arguments[1],alias_context=arguments[2],J("GET",a,{},alias_callback,alias_context)):J("GET",a,b,c):arguments.length==2&&(c=arguments[1],J("GET",a,{},c))}function G(a,b,c,d){J("POST",a,b,c,d)}function H(a){K("POST","oauth/token",{grant_type:"password",client_id:o.client_id,username:a.username,password:a.password},I)}function I(a,b){b?e.onLoginError(b):x(a)}function J(a,b,c,d,e){if(!D())throw"Not logged in, no access_token is present. Authorize the user with geoloqi.authorize() first.";K(a,b,c,d,e)}function K(d,f,g,h,i){var j=r.guid(),k={};d=="POST"&&typeof g=="string"&&(g=r.objectify(g));var l=e.auth!==null?e.auth.access_token:"";k={method:d,path:f,args:g,accessToken:l,callbackId:j,sdkVersion:a,sdkBuild:b,packageName:o.package_name?o.package_name:null,packageVersion:o.package_version?o.package_version:null},h&&(c[j]=i?r.bind(h,i):h),v.postMessage(JSON.stringify(k))}function L(a){if(a.origin!=i)return!1;var b=JSON.parse(a.data);typeof b.oauth=="object"?(typeof b.oauth.auth=="string"&&y(b.oauth.auth),typeof b.oauth.error=="string"&&e.onOAuthError!==null&&e.onOAuthError(b.oauth.error)):(typeof b.response=="string"&&(b.response=JSON.parse(b.response)),typeof b.error=="string"&&(b.error=JSON.parse(b.error)),typeof c[b.callbackId]=="function"&&c[b.callbackId](b.response,b.error))}var a="1.0.15",b="b4d7b2c",c={},d=this,e={},f="https://api.geoloqi.com",g="/js/",h=f+g+"receiver.html",i="https://geoloqi.com",j="/oauth/authorize",k=i+j,l=null,m=easyXDM.noConflict(m),n="_geoloqi_auth",o={},p=null,q=null,r={},s=null,t=null,u=null;defaultConfig={package_name:null,package_version:null};var v=new m.Socket({remote:h,onMessage:function(a,b){if(b!=f&&b!=i)return!1;var d=JSON.parse(a);typeof d.oauth=="object"?(typeof d.oauth.auth=="string"&&y(d.oauth.auth),typeof d.oauth.error=="string"&&e.onOAuthError!==null&&e.onOAuthError(d.oauth.error)):(typeof d.response=="string"&&(d.response=JSON.parse(d.response)),typeof d.error=="string"&&(d.error[0]=="{"?d.error=JSON.parse(d.error):d.error={error_code:500,error:"unknown_error",error_description:d.error}),typeof c[d.callbackId]=="function"&&c[d.callbackId](d.response,d.error))}});return e.init=w,e.auth=p,e.config=o,e.onAuthorize=s,e.onOAuthError=t,e.onLoginError=u,e.authenticate=z,e.authenticateWithRedirect=z.authenticateWithRedirect,e.authenticateWithPopup=B,e.logged_in=D,e.expire=E,e.get=F,e.post=G,e.login=H,e.execute=K,e.receive=L,r.session=function(){var a={};try{localStorage.setItem("mod","mod"),localStorage.removeItem("mod"),localStorageTest=!0}catch(b){localStorageTest=!1}return feature=localStorageTest?"localStorage":"cookie",persist=o.persist?o.persist:feature,create=function(a){r[persist].set(a)},a.create=create,load=function(){return r[persist].get()},a.load=load,destroy=function(){r[persist].erase()},a.destroy=destroy,a}(),r.serialize=function(a){var b=[];for(var c in a)b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")},r.objectify=function(a){var b={},c=/([^&=]+)=([^&]*)/g,d;while(d=c.exec(a))b[decodeURIComponent(d[1])]=decodeURIComponent(d[2]);return b},r.cookie={set:function(a,b){var c;if(b){var d=new Date;d.setTime(d.getTime()+b*1e3),c="; expires="+d.toGMTString()}else c="";document.cookie=n+"="+JSON.stringify(a)+c+"; path=/"},get:function(){var a=n+"=",b=document.cookie.split(";");for(var c=0;c<b.length;c++){var d=b[c];while(d.charAt(0)==" ")d=d.substring(1,d.length);if(d.indexOf(a)===0)return JSON.parse(d.substring(a.length,d.length))}return null},erase:function(){r.cookie.set("",-1)}},r.localStorage={set:function(a){localStorage.setItem(n,JSON.stringify(a))},get:function(){return JSON.parse(localStorage.getItem(n))},erase:function(){localStorage.removeItem(n)}},r.date={},r.date.toISO8601=function(a){function b(a){return a<10?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"},r.guid=function(){return"g"+(Math.random()*(1<<30)).toString(16).replace(".","")},r.merge=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c},r.mergeDeep=function(a,b){for(var c in b)try{b[c].constructor==Object?a[c]=MergeRecursive(a[c],b[c]):a[c]=b[c]}catch(d){a[c]=b[c]}return a},r.toQueryString=function(a,b){if(typeof a!="object")return"";var c="";for(var d in a)if(a.hasOwnProperty(d)){var e=b?b+"."+d:d;if(a[d]instanceof Array)for(var f=0;f<a[d].length;f++)typeof a[d][f]=="object"?c+="&"+obj2query(a[d][f],e):c+="&"+encodeURIComponent(e)+"="+encodeURIComponent(a[d][f]);else a[d]instanceof Date?c+="&"+encodeURIComponent(e)+"="+a[d].getTime():a[d]instanceof Object?a.toString&&a.toString!==Object.prototype.toString?c+="&"+encodeURIComponent(e)+"="+encodeURIComponent(a[d].toString()):c+="&"+obj2query(a[d],forPHP,e):c+="&"+encodeURIComponent(e)+"="+encodeURIComponent(a[d])}return c.replace(/^&/,"")},r.bind=function(a,b){var c,d;if(typeof a!="function")throw new TypeError;return typeof Function.prototype.bind=="function"?a.bind(b):(d=Array.prototype.slice.call(arguments,2),c=function(){if(this instanceof c){ctor.prototype=a.prototype;var e=new ctor,f=a.apply(e,d.concat(Array.prototype.slice.call(arguments)));return Object(f)===f?f:e}return a.apply(b,d.concat(Array.prototype.slice.call(arguments)))})},pointDefaults={success:null,error:null,context:null,raw:null},sendPoint=function(a,b){geoloqi.post("location/update",[{date:r.date.toISO8601(new Date(a.timestamp)),location:{position:{latitude:a.coords.latitude,longitude:a.coords.longitude,speed:a.coords.speed?a.coords.speed:0,altitude:a.coords.altitude?a.coords.altitude:0,horizontal_accuracy:a.coords.accuracy,vertical_accuracy:a.coords.altitudeAccuracy?a.coords.altitudeAccuracy:0},type:"point"},raw:b.raw}]),typeof b.success=="function"&&b.success.apply(b.context,[a])},updateLocation=function(a){function b(a){sendPoint(a,settings)}function c(){typeof settings.error=="function"&&settings.error.apply(settings.context)}settings=r.merge(pointDefaults,a);if(D()&&navigator.geolocation)navigator.geolocation.getCurrentPosition(b,c,{enableHighAccuracy:!0});else{if(!navigator.geolocation)throw"Client does not support HTML5 Geolocation. This function is unavailable";if(!D())throw"Not logged in, no access_token is present. Authorize the user with geoloqi.authorize() first."}},e.updateLocation=updateLocation,watchPosition=function(a){var b=function(){var b=this;this.settings=r.merge(pointDefaults,a),this.settings.context=this.settings.context?this.settings.context:this,this.success=function(a){sendPoint(a,b.settings)},this.error=function(){typeof b.settings.error=="function"&&b.settings.error.call(b.settings.context)},this.start()};b.prototype={stop:function(){navigator.geolocation.clearWatch(this._watcher)},start:function(){this._watcher=navigator.geolocation.watchPosition(this.success,this.error,{enableHighAccuracy:!0})}};if(D()&&navigator.geolocation)return new b;if(!navigator.geolocation)throw"Client does not support HTML5 Geolocation. This function is unavailable";if(!D())throw"Not logged in, no access_token is present. Authorize the user with geoloqi.authorize() first."},e.watchPosition=watchPosition,Batch=function(){var a=function(){this.jobs=[]};return a.prototype={get:function(a,b,c){return this.build_request(a+"?"+r.toQueryString(b),{},c),this},post:function(a,b,c){return this.build_request(a,b,c),this},build_request:function(a,b,c){return this.jobs.push({relative_url:a,body:b,headers:c}),this},run:function(a,b){if(!D())throw"Not logged in, no access_token is present. Authorize the user with geoloqi.authorize() first.";return G("batch/run",{access_token:e.auth.access_token,batch:this.jobs},a,b),this},clear:function(){return this.jobs=[],this}},new a},e.Batch=Batch,e}();window.addEventListener?window.addEventListener("message",function(a){geoloqi.receive(a)}):window.attachEvent&&window.attachEvent("onmessage",function(a){geoloqi.receive(a)});if(!geoloqi)var geoloqi={};geoloqi.maps=function(){var a={},b={};b.merge=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c},a.setDefault=function(a){a instanceof google.maps.Map&&(c.map=a,c.pin.map=a,c.line.map=a,c.handle.map=a)},a.getMap=function(){return c.map},a.styles={},a.styles.define=function(c,d,e){e=typeof e!="undefined"?e:!1,a.styles[c]=b.merge(a.styles._default,d),e&&a.styles.setDefault(c)},a.styles.setDefault=function(b){a.styles._default=a.styles[b]},a.styles._default={marker:{},circles:{count:1,fillColor:"#CE7F2C",fillOpacity:.2,strokeColor:"#CE7F2C",strokeWeight:2,strokeOpacity:.6},handle:{},line:{strokeColor:"#000",strokeWeight:2,strokeOpacity:.6},info:{useInfobox:!1}},a.styles.geoloqi_js=a.styles._default;var c={map:null,pin:{style:"_default",map:null,visible:!0,clickable:!1,draggable:!0,editable:!0,radius:100,minRadius:100,autopan:!1,toggleInfobox:!1},line:{clickable:!1,map:null},handle:{icon:a.styles._default.handle.icon,shadow:a.styles._default.handle.shadow,map:null,draggable:!0,raiseOnDrag:!1,clickable:!1,visible:!0},info:{useInfobox:!1,opened:!1,toggleInfoOnClick:!0,openAfterDrag:!0},events:{dragstart:null,dragend:null,drag:null,open:null,close:null,lock:null,unlock:null,radius_changed:null,position_changed:null,map_changed:null,create:null,show:null,hide:null,click:null}};return a.helpers={},a.helpers.fitMapToRadius=function(a,b){bounds=new google.maps.LatLngBounds;var d=google.maps.geometry.spherical;bounds.extend(d.computeOffset(a,b,0)),bounds.extend(d.computeOffset(a,b,180)),bounds.extend(d.computeOffset(a,b,270)),bounds.extend(d.computeOffset(a,b,90)),c.map.fitBounds(bounds)},a.helpers.getIdealRadiusForMap=function(b){fraction=typeof b!="undefined"?100/b:4;var c=a.getMap().getBounds(),d=c.getNorthEast(),e=c.getSouthWest(),f=new google.maps.LatLng(e.lat(),d.lng());return google.maps.geometry.spherical.computeDistanceBetween(d,f)/fraction},a.pins={},a.pins.Basic=function(d,e){e=typeof e!="undefined"?e:!0;var f=function(){this.options=b.merge(c.pin,d),this.style=a.styles[this.options.style],this.options.icon=this.style.marker.icon,this.options.shadow=this.style.marker.shadow,this.options.position instanceof google.maps.LatLng==0&&(this.options.position=new google.maps.LatLng(this.options.position.latitude,this.options.position.longitude)),this.options.editable?d.draggable=!0:d.draggable=!1,this.isVisible=typeof this.options.map=="object"?!0:!1,this.events=b.merge(c.events,d.events),e&&this.initPin()};return f.prototype={centerHere:function(){return mapToPan=this.getMap(),mapToPan.panTo(this.getPosition()),this},onMap:function(){return typeof this.getMap()=="object"?!0:!1},showOnMap:function(a){return a=a?a:c.map,this.marker.setVisible(!0),this.marker.setMap(a),google.maps.event.trigger(this.marker,"show"),this},removeFromMap:function(){return this.marker.setMap(null),google.maps.event.trigger(this.marker,"hide"),this},setDraggable:function(a){return this.marker.setDraggable(a),this},getDraggable:function(){return this.marker.getDraggable()},toggleDraggable:function(){return this.getDraggable()?this.setDraggable(!1):this.setDraggable(!0),this},getMap:function(){return this.marker.getMap()},moveTo:function(a,b){return b=typeof b!="undefined"?b:!1,a instanceof google.maps.LatLng==0&&(a=new google.maps.LatLng(a.latitude,a.longitude)),this.setPosition(a),b&&this.centerHere(),this},setPosition:function(a){return a instanceof google.maps.LatLng==0&&(a=new google.maps.LatLng(a.latitude,a.longitude)),this.marker.setPosition(a),this},getPosition:function(){return this.marker.getPosition()},getLat:function(){return this.getPosition().lat()},getLng:function(){return this.getPosition().lng()},setMap:function(a){return this.marker.setMap(a),google.maps.event.trigger(this.marker,"map_changed"),this},initPin:function(){var a=this;this.marker=new google.maps.Marker(this.options),google.maps.event.addListener(this.marker,"dragstart",function(b){a.events.dragstart?a.events.dragstart.apply(a,[b]):null}),google.maps.event.addListener(this.marker,"drag",function(b){a.events.drag?a.events.drag.apply(a,[b]):null}),google.maps.event.addListener(this.marker,"dragend",function(b){a.options.autopan&&a.getMap().panTo(a.getPosition()),a.events.dragend?a.events.dragend.apply(a,[b]):null}),google.maps.event.addListener(this.marker,"position_changed",function(b){a.events.position_changed?a.events.position_changed.apply(a,[b]):null}),google.maps.event.addListener(this.marker,"map_changed",function(b){a.events.map_changed?a.events.map_changed.apply(a):null}),google.maps.event.addListener(this.marker,"click",function(b){a.events.click?a.events.click.apply(a,[b]):null}),this.events.create?this.events.create():null}},new f},a.pins.WithRadius=function(d,e,f){f=typeof f!="undefined"?f:!0,e=typeof e!="undefined"?e:!0;var g=function(){this.options=b.merge(c.pin,d),this.style=a.styles[this.options.style],this.handleOptions=b.merge(c.handle,this.style.handle),this.handleOptions.position=new google.maps.LatLng(0,0),this.handleOptions.map=this.options.map,this.lineOptions=b.merge(c.line,this.style.line),this.lineOptions.map=this.options.map,this.minRadius=this.options.minRadius,this.hideCircles=function(){if(this.circles.length>0)for(var a=0;a<this.circles.length;a++)this.circles[a].circle.setMap(null);return this},this.showCircles=function(){if(this.circles.length>0)for(var a=0;a<this.circles.length;a++)this.circles[a].circle.setMap(this.getMap());return this},this.getRadius=function(){return this.circles[0].circle.getRadius()},this.setupCircles=function(a,b){var c=this;a=a?a:this.radius,a=Math.max(c.minRadius,a),b=typeof b!="undefined"?b:this.onMap(),this.hideCircles(),this.circles=[];for(var d=0;d<this.style.circles.count;d++)this.circles.push({circle:new google.maps.Circle({center:this.getPosition(),radius:a-d*3,fillColor:this.style.circles.fillColor,fillOpacity:this.style.circles.fillOpacity,strokeColor:this.style.circles.strokeColor,strokeWeight:this.style.circles.strokeWeight,strokeOpacity:this.style.circles.strokeOpacity,map:b?this.getMap():null,zIndex:-1}),index:d}),this.circles[d].circle.bindTo("center",this.marker,"position");return google.maps.event.trigger(this.marker,"radius_changed"),this.updateHandle(),this.updateLine(),this},this.updateHandle=function(){return this.handle.setPosition(google.maps.geometry.spherical.computeOffset(this.marker.getPosition(),this.getRadius(),135)),this},this.updateLine=function(){return this.line.setPath([this.getPosition(),this.handle.getPosition()]),this},this.hideHandle=function(){return this.line.setMap(null),this.handle.setMap(null),this},this.fitCircles=function(b){return b=b?b:50,this.setupCircles(a.helpers.getIdealRadiusForMap(b)),this},this.showHandle=function(){return this.updateHandle(),this.updateLine(),this.line.setMap(this.getMap()),this.handle.setMap(this.getMap()),this},this.fitCircles=function(){return this.setupCircles(a.helpers.getIdealRadiusForMap()),this},this.lockPin=function(){return this.isLocked||(this.setDraggable(!1),this.isLocked=!0,this.hideHandle(),google.maps.event.trigger(this.marker,"locked")),this},this.unlockPin=function(){return this.isLocked&&(this.marker.setDraggable(!0),this.isLocked=!1,this.getMap()&&this.showHandle(),google.maps.event.trigger(this.marker,"unlocked")),this},this.toggleLock=function(){return this.isLocked?this.unlockPin():this.lockPin(),this},this.initRadius=function(){var b=this;this.line=new google.maps.Polyline(this.lineOptions),this.handle=new google.maps.Marker(this.handleOptions),this.circles=[],this.options.draggable=this.options.editable,this.options.editable?this.unlockPin():this.lockPin(),this.setupCircles(this.options.radius,this.options.map),this.updateHandle(),this.updateLine(),google.maps.event.addListener(this.marker,"hide",function(a){b.hideHandle(),b.hideCircles()}),google.maps.event.addListener(this.marker,"map_changed",function(a){b.isLocked||b.showHandle();for(var c=0;c<=b.circles.length-1;c++)b.circles[c].circle.setMap(b.getMap())}),google.maps.event.addListener(this.marker,"show",function(a){b.isLocked||b.showHandle(),b.showCircles()}),google.maps.event.addListener(this.marker,"position_changed",function(a){b.updateHandle(),b.updateLine()}),google.maps.event.addListener(this.marker,"dragstart",function(a){b.hideHandle()}),google.maps.event.addListener(this.marker,"radius_changed",function(a){b.events.radius_changed?b.events.radius_changed.apply(b):null}),google.maps.event.addListener(this.marker,"dragend",function(a){b.updateHandle(),b.showHandle()}),google.maps.event.addListener(this.handle,"drag",function(a){var c=google.maps.geometry.spherical,d=b.getPosition(),e=a.latLng,f=function(a){return a*(Math.PI/180)},g=c.computeHeading(d,e),h=45+g,i=c.computeDistanceBetween(d,e);projectedRadius=-1*Math.cos(f(h))*i,newRadius=projectedRadius>=b.minRadius?projectedRadius:b.minRadius;if(newRadius>=b.minRadius){b.handle.setPosition(c.computeOffset(d,newRadius,135)),b.updateLine();for(var j=0;j<b.style.circles.count;j++)b.circles[j].circle.setRadius(newRadius-j*3)}}),google.maps.event.addListener(this.handle,"dragend",function(d){var e=c.map.getBounds();e.contains(b.handle.getPosition())||a.helpers.fitMapToRadius(b.marker.getPosition(),b.getRadius()),google.maps.event.trigger(b.marker,"radius_changed")})},e?this.initRadius():null};return f?g.prototype=new a.pins.Basic(d):"",new g},a.pins.WithInfobox=function(d,e,f){f=typeof f!="undefined"?f:!0,e=typeof e!="undefined"?e:!0;var g=function(){this.options=b.merge(c.pin,d),this.style=a.styles[this.options.style],this.infoOptions=b.merge(b.merge(c.info,this.style.info),d),this.hide=function(){return this.infoVisible=!1,!this.options.content instanceof google.maps.InfoWindow?this.info.hide():this.close(),this},this.show=function(){return this.infoVisible=!0,!this.options.content instanceof google.maps.InfoWindow?this.info.show(c.map,this.marker):this.open(),this},this.open=function(){return this.opened=!0,this.infoVisible=!0,this.delayedInfobox=!0,this.info.open(c.map,this.marker),google.maps.event.trigger(this.marker,"open"),this},this.close=function(){return this.opened=!1,this.infoVisible=!1,this.info.close(),google.maps.event.trigger(this.marker,"close"),this},this.toggleInfo=function(){return this.infoVisible?this.hide():this.show(),this},this.setContent=function(a){return this.info.setContent(a),this},this.getContent=function(a){return this.info.getContent()},this.setInfo=function(a,b){return typeof b!="undefined"?b:!1,this.info?this.info.close():null,this.info=a,this.opened=b,b?this.info.open(c.map,this.marker):this.close(),google.maps.event.addListener(this.info,"close",function(){self.opened=!1}),google.maps.event.addListener(this.info,"closeclick",function(){self.opened=!1}),this},this.initInfobox=function(){var a=this;this.opened=this.infoOptions.opened,this.infoOptions.position=null,typeof this.options.content=="string"?this.infoOptions.useInfobox?this.setInfo(new InfoBox(this.infoOptions),this.opened):this.setInfo(new google.maps.InfoWindow(this.infoOptions),this.opened):this.options.content instanceof InfoBox||this.options.content instanceof google.maps.InfoWindow?this.setInfo(this.options.content,this.opened):this.info=null,this.options.toggleInfoOnClick?(this.isClickable=!0,this.marker.setClickable(!0),this.clickEvent=google.maps.event.addListener(this.marker,"click",function(b){a.opened?a.close():a.open()})):console.log("OK"),this.delayedInfobox=!1,google.maps.event.addListener(this.marker,"dragstart",function(b){a.hide()}),google.maps.event.addListener(this.marker,"dragend",function(b){a.infoVisible||a.show()}),google.maps.event.addListener(this.marker,"hide",function(b){a.info.close()}),google.maps.event.addListener(this.marker,"open",function(b){a.events.open?a.events.open.apply(a,[b]):null}),google.maps.event.addListener(this.marker,"close",function(b){a.events.close?a.events.close.apply(a,[b]):null})},e?this.initInfobox():null};return f?g.prototype=new a.pins.Basic(d):null,new g},a.pins.WithInfoboxAndRadius=function(c,d,e){e=typeof e!="undefined"?e:!0,d=typeof d!="undefined"?d:!0;var f=function(){this.initInfoboxAndRadius=function(){var a=this;google.maps.event.addListener(this.handle,"dragstart",function(b){a.opened&&a.options.openAfterDrag&&a.close()}),google.maps.event.addListener(this.handle,"dragend",function(b){!a.opened&&a.options.openAfterDrag&&a.open()})},d&&(this.initRadius(),this.initInfobox(),this.initInfoboxAndRadius())};return f.prototype=b.merge(new a.pins.WithRadius(c,!1,!0),new a.pins.WithInfobox(c,!1,!1)),new f},a.InfoBox=function(d,e){return style=e?a.styles[e]:a.styles._default,options=b.merge(c.info,style.info),options.content=d,new InfoBox(options)},a}();if(typeof geoloqi=="undefined")var geoloqi={};geoloqi.Socket=function(a,b,c){var d=function(){c=typeof c=="undefined"?{}:c;var d=this,e="https://subscribe.geoloqi.com:443";this.auth=b,this.type=a,this.events={start:c.start||null,location:c.location||null,disconnect:c.disconnect||null},this.socket=io.connect(e),this.start=function(){this.socket.on("enter authentication",function(a){d.socket.emit("token",d.type+"-"+d.auth),d.events.start}),this.socket.on("location",function(a){var a=JSON.parse(a);d.events.location(a)}),this.socket.on("disconnect",d.events.disconnect)}};return new d};